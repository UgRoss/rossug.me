---
import { ClientRouter } from 'astro:transitions'

import type { LayoutProps } from '@/types'

import Navbar from '@/components/layout/Navbar.astro'
import TransitionWrapper from '@/components/layout/TransitionWrapper.astro'
import FaviconThemeSwitcher from '@/components/ui/FaviconThemeSwitcher.astro'
import ThemeManager from '@/components/ui/ThemeManager.astro'
import { themeConfig } from '@/config'

type Props = LayoutProps

const { type = 'page' } = Astro.props
const language = themeConfig.site.language || 'en-US'
const fadeAnimation = themeConfig.general.fadeAnimation
---

<html lang={language}>
  <head>
    <ThemeManager />
    {fadeAnimation && <ClientRouter />}
    <slot name="head" />
  </head>
  <body>
    <div class="app-wrapper">
      <FaviconThemeSwitcher />
      <Navbar />

      {
        fadeAnimation ? (
          <TransitionWrapper class="layout-wrapper" type={type}>
            <slot />
          </TransitionWrapper>
        ) : (
          <div class="layout-wrapper">
            <slot />
          </div>
        )
      }
    </div>
  </body>
</html>

<style is:global>
  .layout-wrapper {
    padding-top: 5rem;
    display: flex;
    flex-direction: column;
    min-height: calc(100vh - 7.5rem);
  }

  @media (max-width: 768px) {
    .layout-wrapper {
      min-height: calc(100vh - 5.5rem);
    }
  }
</style>
