---
import type { Book } from '@/data/books'

interface Props {
  book: Book
  layout?: 'list' | 'grid'
}

const { book, layout = 'grid' } = Astro.props

const isList = layout === 'list'
---

<div
  class:list={['group cursor-pointer book-card', isList ? 'flex gap-6 items-start' : 'space-y-3']}
  data-book={JSON.stringify(book)}
>
  <div
    class:list={[
      'relative shrink-0 rounded-lg overflow-hidden shadow-md group-hover:shadow-xl transition-all duration-500 bg-neutral-100',
      isList ? 'w-24 h-36' : 'aspect-[2/3] w-full group-hover:-translate-y-1'
    ]}
  >
    <img
      src={book.coverUrl}
      alt={book.title}
      class:list={[
        'w-full h-full object-cover transition-all duration-700',
        !isList && 'grayscale group-hover:grayscale-0'
      ]}
      loading="lazy"
    />
  </div>

  <div class:list={['space-y-1', isList ? 'py-1' : '']}>
    <h3
      class:list={[
        'font-bold group-hover:text-neutral-600 transition-colors',
        isList ? 'text-lg' : 'text-sm leading-tight'
      ]}
    >
      {book.title}
    </h3>
    <p class:list={['font-medium text-neutral-400', isList ? 'text-sm' : 'text-[11px]']}>
      {book.author}
    </p>

    {
      isList && (
        <p class="text-sm text-neutral-600 leading-relaxed max-w-md line-clamp-2 mt-1">
          {book.summary}
        </p>
      )
    }
  </div>
</div>
