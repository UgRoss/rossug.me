---
import BookCard from '@/components/books/BookCard.astro'
import BookModal from '@/components/books/BookModal'
import { themeConfig } from '@/config'
import { BOOKS } from '@/data/books'
import IndexLayout from '@/layouts/IndexLayout.astro'

const currentlyReading = BOOKS.filter((b) => b.status === 'reading')
const finishedBooks = BOOKS.filter((b) => b.status === 'finished')
---

<IndexLayout description="Reading list and book notes" title={`Reading - ${themeConfig.site.title}`}>
  <div class="space-y-12">
    <header class="space-y-2">
      <h1 class="text-3xl font-bold tracking-tight">Books</h1>
      <p class="text-neutral-500">A collection of books I've read or am currently exploring.</p>
    </header>

    <div class="space-y-16">
      {/* Currently Reading Section */}
      {
        currentlyReading.length > 0 && (
          <section class="space-y-6">
            <h2 class="text-xs font-semibold text-neutral-400 uppercase tracking-widest">
              Currently Reading
            </h2>
            <div class="grid gap-8">
              {currentlyReading.map((book) => (
                <BookCard book={book} layout="list" />
              ))}
            </div>
          </section>
        )
      }

      {/* Finished Books Grid */}
      {
        finishedBooks.length > 0 && (
          <section class="space-y-6">
            <h2 class="text-xs font-semibold text-neutral-400 uppercase tracking-widest">
              Finished
            </h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-x-6 gap-y-10">
              {finishedBooks.map((book) => (
                <BookCard book={book} layout="grid" />
              ))}
            </div>
          </section>
        )
      }
    </div>
  </div>

  <BookModal allBooks={BOOKS} client:load />
</IndexLayout>
