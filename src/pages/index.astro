---
import About from '@/components/widgets/About.astro'
import SimpleContentList from '@/components/ui/SimpleContentList.astro'
import { themeConfig } from '@/config'
import IndexLayout from '@/layouts/IndexLayout.astro'
import { getSortedFilteredPosts } from '@/utils/draft'
import { getSortedFilteredNotes } from '@/utils/notes'

const allPosts = await getSortedFilteredPosts()
const posts = allPosts.slice(0, 4)
const allNotes = await getSortedFilteredNotes()
const notes = allNotes.slice(0, 4)

const recentPostItems = posts.map((post) => ({
  date: post.data.pubDate,
  href: `/blog/${post.id}/`,
  title: post.data.title
}))

const recentTilItems = notes.map((note) => ({
  date: note.data.pubDate,
  href: `/notes/${note.id}`,
  label: note.data.category,
  title: note.data.title
}))
---

<IndexLayout description={themeConfig.site.description} title={themeConfig.site.title}>
  <About />
  <main class="mt-12 space-y-10">
    <section>
      <h2 class="mb-6 text-xl font-bold">Recent Posts</h2>
      <SimpleContentList items={recentPostItems} />
    </section>
  </main>
</IndexLayout>
